<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Indian Stock Dashboard</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <nav class="navbar navbar-dark bg-dark">
            <div class="container-fluid">
                <span class="navbar-brand">ðŸ“ˆ Indian Stock Dashboard</span>
                <div class="d-flex align-items-center gap-2 ms-auto">
                    <!-- Refresh -->
                    <button id="refreshBtn" class="btn btn-outline-secondary btn-sm">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>

                    <!-- Dark mode (DESKTOP ONLY) -->
                    <button
                        id="darkModeToggleDesktop"
                        class="btn btn-outline-secondary btn-sm darkModeToggle d-none d-lg-inline-flex"
                        aria-label="Toggle dark mode"
                    >
                        <i class="bi bi-moon"></i>
                    </button>
                </div>
            </div>
        </nav>

        <div class="container my-4">
            <div id="loading" class="text-center my-4" style="display: none">
                <div class="spinner-border text-primary"></div>
            </div>
            <div class="row align-items-center mb-3">
                <!-- SEARCH -->
                <div class="col-9 col-sm-6">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search stocks..." />
                </div>

                <!-- RESET -->
                <div class="col-3 col-sm-2">
                    <button id="resetFilters" class="btn btn-outline-secondary btn-sm w-100">Reset</button>
                </div>

                <!-- SORT (DESKTOP ONLY) -->
                <div class="col-sm-4 d-none d-lg-flex align-items-center gap-2 justify-content-end">
                    <i class="bi bi-funnel-fill text-muted" aria-hidden="true"></i>

                    <div class="btn-group btn-group-sm" id="sortControls">
                        <button class="btn btn-outline-secondary sort-btn" data-key="price">
                            Price <span class="sort-indicator"></span>
                        </button>
                        <button class="btn btn-outline-secondary sort-btn" data-key="change">
                            % Change <span class="sort-indicator"></span>
                        </button>
                        <button class="btn btn-outline-secondary sort-btn" data-key="marketCap">
                            MCap <span class="sort-indicator"></span>
                        </button>
                    </div>
                </div>
            </div>


            <!-- SORT SUMMARY (MOBILE ONLY) -->
            <div class="small text-muted d-lg-none mb-2" id="activeSortLabel" style="display: none;"></div>
            
            <!-- STOCK CARDS CONTAINER -->
            <div class="row" id="stockContainer"></div>
        </div>

        <!-- MOBILE BOTTOM BAR -->
        <div class="mobile-bottom-bar d-lg-none">
            <button
                class="btn btn-light btn-sm flex-fill"
                id="mobileSearchFocus"
                aria-label="Search stocks"
            >
                <i class="bi bi-search"></i>
            </button>

            <div class="dropdown flex-fill">
                <button
                    class="btn btn-light btn-sm w-100 h-100"
                    data-bs-toggle="dropdown"
                    aria-label="Sort stocks"
                >
                    <i class="bi bi-funnel"></i>
                </button>

                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item sort-btn" data-key="price">Price</a></li>
                    <li><a class="dropdown-item sort-btn" data-key="change">% Change</a></li>
                    <li><a class="dropdown-item sort-btn" data-key="marketCap">Market Cap</a></li>
                </ul>
            </div>

            <!-- Dark mode (MOBILE ONLY) -->
            <button
                id="darkModeToggleMobile"
                class="btn btn-light flex-fill darkModeToggle"
                aria-label="Toggle dark mode"
            >
                <i class="bi bi-moon"></i>
            </button>
        </div>

        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="js/config.js"></script>
        <script src="js/api.js"></script>
        <script src="js/app.js"></script>
    </body>
</html>
